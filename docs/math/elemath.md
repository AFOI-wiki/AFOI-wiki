**by MKCCT**

## 前言
本文是一个速成指南, 旨在快速帮助读者 (准高中生或学过同等难度课程的学生) 在最短的时间内把握学习 OI 所需要的大部分数学**基础**知识. 阅读本文只需读者具备义务教育课程九年级数学 (或同等难度标准课程) 的基础. 

本文内容以高中数学为底本, 删去了其中在 OI 里不常用或几乎不用的知识 (但在高中数学和以后学习中毕竟重要的知识例外), 对 OI 中常见的思想方法又做了较多的倾斜和拓展, 一定程度上精确了内容的针对性. 

## 逻辑与集合

### 谓词逻辑、命题逻辑

考察这样一个句子："苹果可以吃". "苹果" 是某个主体, "可以吃" 是主体满足的某种性质. 我们将表示主体的词称为**主体词**, 表示主体满足的性质的词称为**谓词**. 形式化地, 我们把 "苹果" 记为 $x$, "可以吃" 记为 $F$, 则上面的命题可以写为 $F(x)$, 表示 $x$ 满足某种性质. 主体词和谓词合起来就构成了**原子命题**, 这意味着其作为结构上最简单的命题, 不包含其他的命题和逻辑联结词. 研究谓词规律的逻辑就是**谓词逻辑**. 如果进一步考察原子命题及其复合命题的关系, 我们便将这种逻辑称为**命题逻辑**. 在命题逻辑中一般不涉及具体的谓词, 而将命题看作整体来研究, 我们可以单独用一个字母表示命题, 如将 "苹果可以吃" 记为 $p$. 

### 逻辑联结词

考虑命题之间的相互关系在数学上即是对他们进行运算, **逻辑联结词**就是命题之间的运算符号. 最简单的联结词就是**与**和**或**, 分别记为 $\land$ 和 $\lor$. 

???+example "例子"
    记 "苹果可以吃" 为 $p$, "苹果是红的" 为 $q$, 则 $p\land q$ 为 "苹果可以吃且是红的". 
    
    记 "现在是白天" 为 $p$, "现在是夜里" 为 $q$, 则 $p\lor q$ 为 "现在是白天或是夜里". 

我们也对一个命题进行否定, 此时用到了**非**联结词, 记为 $\lnot$, 如 "苹果不可以吃" 为 $\lnot p$. 

对于命题, 我们更关心它的真伪, 我们记 "真" 为 $1$, "假" 为 $0$. 命题的运算便有了结果. 

???+example "例子"
    若 $p=1,q=0$, 则 $p\land q=0,p\lor q=1,\lnot q=1$. 更多运算均可推出相应结果. 

???+info "定理"
    $$\lnot (p\lor q)=(\lnot p)\land (\lnot q),\lnot (p\land q)=(\lnot p)\lor(\lnot q)$$

我们常常做推断, 这便引出了**条件联结词**, 记 $p\Rightarrow q$ 表示 $p$ **蕴含** $q$ 或 $p$ **推出** $q$. 

???+example "例子"
    若 $p$ 表示 $x>1$, $q$ 表示 $x\ge 1$, 则 $p\Rightarrow q$ 成立. 

一般我们规定 $p\Rightarrow q=(\lnot p)\lor q$. 这意味着如果 $p=1, (p\Rightarrow q)=1$, 则 $q=1$, 此时我们称 $p$ 为 $q$ 的**充分条件**, 还可以称 $q$ 为 $p$ 的**必要条件**. 

???+warning "注意"
    如果 $p=0$, 那么 $p\Rightarrow q$ 总是真的. 这就是逻辑学上的 "假蕴含一切": 如果推理前提都是错的, 那就什么都推得出来. 所以一定要保证推理前提正确. 

对复合命题 $p\Rightarrow q$, 称 $p\Rightarrow (\lnot q)$ 为其**否命题**, $q\Rightarrow p$ 为其**逆命题**, $(\lnot q)\Rightarrow (\lnot p)$ 为其**逆否命题**. 而当 $(p\Rightarrow q)\land(q\Rightarrow p)=1$ 时, 我们称 $p$ 与 $q$ **等价**, 记为 $p\Leftrightarrow q$, 或称 $p$ 与 $q$ 互为**充分必要条件**, 简称**充要条件**. 

???+info "定理"
    逆否命题与原命题等价, 即 $(\lnot q)\Rightarrow (\lnot p)=(p\Rightarrow q)$ 或 $((\lnot q)\Rightarrow (\lnot p))\Leftrightarrow (p\Rightarrow q)$. 

这个定理在解决[ 2-SAT 问题](https://oi-wiki.org/graph/2-sat/)中有重要应用. 

???+example "例子"
    若 $p:x^2+y^2=0,q:x=y=0$, 则 $p$ 与 $q$ 等价. 我们也可以看到其逆否命题 "若 $xy\neq 0$, 则 $x^2+y^2\neq 0$" 也成立. 

### 逻辑量词

考察命题: "对于任意正整数 $n$, 存在大于 $n$ 的正整数 $m$". 我们可以将 "对于任意" 记为 $\forall$, 将 "存在" 记为 $\exists$, 将 "$n$ 是正整数" 这件事记为 $n\in \mathbb{Z^+}$ (注意这里用了我们即将介绍集合的语言, 现在可以暂时将其看作一种符号). 那么我们可以完全形式化地重写这个命题
$$
\forall n\in\mathbb{Z^+},\exists m\in\mathbb{Z^+} \textrm{ s.t. } m>n.
$$
其中 $\rm s.t.$ 是 subject to 或 such that 的缩写, 表示前面的变量满足后面所述的条件. 这个形式化命题直译过来就是 "对于任意是正整数的 $n$, 存在是正整数的 $m$ 满足 $m>n$". 存在和任意都是**量词**, 它们表示命题的考察范围是普遍的还是特殊的. 

### 集合

**集合**就是由**元素**组成的集体, 它的出现是为了将一类事物打包来方便研究. 

???+warning "注意"
    由 ZF 公理导出的现代集合论不是我们要讨论的对象, 我们只讨论传统的, 直观的集合解释. 这里的集合是一种无法被严格定义的存在, 我们只通过一种模糊的方式感知集合的运用. 

???+example "例子"
    人体的呼吸系统由以下几个器官构成：鼻腔 $a$, 咽 $b$, 喉 $c$, 气管 $d$, 支气管 $e$, 肺 $f$, 横膈膜 $g$. 如果我们记呼吸系统为 $M$, 则集合 $M$ 可以表示为 $M=\{a,b,c,d,e,f,g\}$. 

像上面那样表示集合的方法为**列举表示法**, 呼吸系统是一个集合, 各种器官是这个集合中的元素, 我们用大括号括起这些元素表示它们组成一个整体. 另一种表示方法为**描述法**, 如 $M=\{\text{地球上所有的男性人类}\},N=\{\text{所有大于 } n \text{ 的正整数}\}$. 

???+example "例子"
    描述法更常用的例子是这样的: **用一个短线分隔开描述的对象和其满足的条件**. 如 $M=\{x|x>0,x^2-2x+1=0\}$, 当然也可以写为 $M=\{x>0|x^2-2x+1=0\}$, 这意味着 $M$ 中的元素为方程的正数解, 即 $M=\{1\}$. 这样写的好处就是可以区别 $M=\{y|y=1/x\}$ 和 $M=\{x|y=1/x\}$. 

用 $|A|$ 或 ${\rm card}(A)$ 表示集合元素的个数. **有限集**就是元素个数有限的集合, **无限集**就是元素个数无限的集合, 对于无限集如何比较他们的集合大小, 我们暂不在本文讨论. 对于极其常用且特定的集合, 数学中有统一的写法, 它们一般都为空心字体. 

- 空集 $\varnothing$, $|\varnothing|=0$; 
- 自然数集 $\mathbb{N}=\{0,1,2,...\}$; 
- 整数集 $\mathbb{Z}=\{...,-2,-1,0,1,2,...\}$; 
- 正整数集 $\mathbb{N^*,N_+,Z^+}=\{1,2,3,...\}$; 
- 有理数集 $\mathbb{Q}=\{x=\dfrac{a}{b}|(a,b\in \mathbb{Z})\land(b\neq 0)\land(a,b \text{ 互质})\}$; 
- 实数集 $\mathbb{R}$. 

一个集体要成为集合, 需满足三条性质：**确定性**, **互异性**, **无序性**. 确定性意味着集合中的每一个元素都是确定描述的, 比如「班里比较高的男生组成的集体」就不是一个集合, 因为「比较高」不是一个确定的描述; 互异性意味着集合中不能有相同的元素, 比如 $\{1,1,2,3\}$ 就不是一个集合; 无序性意味着改变元素的列举顺序不会改变集合的性质, 比如 $\{1,2,3\}=\{3,2,1\}$, 因为我们规定如果两个集合元素完全一致, 则两个集合相等. 读者可以按照这三条性质检查上述的所有集合. 

一个元素 $x$ 在集合 $M$ 内部, 就说它**属于**这个集合, 记为 $x\in M$, 反之就**不属于**, 记为 $x\not\in M$. 如果一个集合中的元素是另一个集合的一部分, 比如 $A=\{1,2\},B=\{1,2,3\}$, 那么我们就说 $A$ 是 $B$ 的**子集**, $A$ **包含于** $B$, $B$ **包含** $A$, 记为 $A\subseteq B$. 特别地, 对于任意集合 $A$, 有 $A\subseteq A,\varnothing \subseteq A$. 如果 $A\subseteq B$ 且 $A\neq B$, 那么 $A$ 是 $B$ 的**真子集**, $A$ **真包含于** $B$, 记为 $A\subsetneq B$. 

???+info "定理"
    集合 $A$ 的子集个数为 $2^{|A|}$, 真子集个数为 $2^{|A|}-1$. 

证明留作思考. 

### 集合的运算

像命题一样, 集合间也可以运算, 得到的结果仍是集合. 

对集合求**交**, 就是将两个集合相同的元素挑出来组成一个**交集**, 记为 $A \cap B$; 对集合求**并**, 就是将两个集合合并成一个**并集**, 记为$A\cup B$; 对集合求**补**, 就是将一个集合的子集去掉, 留下剩下的**补集**, 记为 $\overline{A}$ (注意此种记法需要指定一个全集 $U$ 并且 $A\subseteq U$) , 或记为 $\complement_UA$; 对集合求**差**, 就是把集合 $A$ 中同时在 $B$ 中的元素去掉, 得到一个**差集**, 记为 $A\setminus B$. 

???+example "例子"
    $A=\{1,2,3,4,5\},B=\{4,5,6,7,8\},U=\{x\in\mathbb{Z}|1\le x\le 8\}$. 
    
    则 $A\cap B=\{4,5\},A\cup B=U,\overline{A}=B\setminus A=\{6,7,8\}$. 

    实数集可以这么表示: $\mathbb{R} = \mathbb{Q}\cup\{\text{所有无限不循环小数}\}$.

???+info "De Morgan 定律"
    $$\overline{A\cap B}=\overline{A}\cup\overline{B}$$

    $$\overline{A\cup B}=\overline{A}\cap\overline{B}$$


???+info "定理"
    $$A\cup(B\cap C)=(A\cup B)\cap(A\cup C)$$

    $$A\cap(B\cup C)=(A\cap B)\cup(A\cap C)$$

以上结论都可通过画 [Venn 图](https://baike.baidu.com/item/%E6%96%87%E6%B0%8F%E5%9B%BE)快速得到验证. 

### 区间

区间是为了方便描述连续的数组成的集合而产生的概念. 我们直接定义

- $[a,b] = \{x\in\mathbb{R}|a\leq x\leq b\}$ 为一**闭区间**;
- $(a,b) = \{x\in\mathbb{R}|a < x < b\}$ 为一**开区间**;
- $(a,b] = \{x\in\mathbb{R}|a < x \leq b\}$ 为一**左开右闭区间**;
- $[a,b) = \{x\in\mathbb{R}|a \leq x < b\}$ 为一**左闭右开区间**;
- 特别地, 有 $[a,+\infty)=\{x\in\mathbb{R}|x\geq a\}$, $(a,+\infty)=\{x\in\mathbb{R}|x>a\}$, $(-\infty,a)=\{x\in\mathbb{R}|x<a\}$, $(-\infty,a]=\{x\in\mathbb{R}|x\leq a\}$.

???+exampe "例子"
    $x\in[1,3]\Leftrightarrow 1\le x\le 3, (3,2]=(3,3)=\varnothing, \mathbb{R}\setminus\{0\}=(-\infty,0)\cup(0,+\infty)$, 等等.

## 数列初步

直接而粗略地说, **数列**就是一列数. 人们将一列数顺次写下, 潜在的目的就是为了找到这数中的规律, 并以更简单的形式勾勒出来. 我们接下来就来初步探寻这种简单形式.

### 等差, 等比数列及其通项

一个长为 $n$ 的数列记为 $\{a_n\}$, $n$ 为数列的**项数**, 其中数列的第 $i$ 项为 $a_i$, 特别地, $a_1$ 称为**首项**, $a_n$ 称为**末项**. 若 $\forall i\in(1,n]\cap\mathbb{Z}$, 都有 $a_i-a_{i-1}=d$ (其中 $d$ 是一个常数), 那么就称 $\{a_n\}$ 是一个**等差数列**, $d$ 为 $\{a_n\}$ 的**公差**; 若 $\forall i\in(1,n]\cap\mathbb{Z}, a_i\neq 0$ 且有 $\dfrac{a_i}{a_{i-1}}=q\neq 0$ (其中 $q$ 是一个常数), 那么就称 $\{a_n\}$ 是一个**等比数列**, $q$ 为 $\{a_n\}$ 的**公比**. 特别地, 所有项相等的数列称为**常数列**, 其公差为 $0$, 若每一项不等于 $0$ 则公比为 $1$.

将数列的第 $n$ 项 $a_n$ 通过一个含 $n$ 的参数式表达出来, 就是该数列的**通项**. 比如对于数列 $1,2,3,...$, 该数列的通项为 $a_n=n$; 对于数列 $1/2, 1/4, 1/8,...$, 其通项为 $a_n=2^{-n}$. 等差, 等比数列作为最简单而有规律的数列, 其通项也很简单, 我们直接给出, 请读者自行构造若干数列代入检查.

???+info "定理"
    若等差数列 $\{a_n\}$ 的首项为 $a_1$, 公差为 $d$, 则通项为 $a_n=a_1+(n-1)d$.

    若等比数列 $\{a_n\}$ 的首项为 $a_1$, 公比为 $q$, 则通项为 $a_n=a_1q^{n-1}$.

### 求和与求积符号, 巨运算符

我们接下来将引入极为重要的记号以方便后面的讨论. 在等差等比数列的定义中, 我们见到了形如 $\forall i\in(1,n]\cap\mathbb{Z}$ 的记号, 这里的 $i$ 就不是一个有具体含义的量, 而是为了表达我们取遍了满足条件的所有数, 这种用来辅助说明的变量称为**指标**. 接下来我们用大写的希腊字母 $\sum$ 来定义这样的过程:
$$
\sum_{i\in [1,n]\cap\mathbb{Z}} a_i = a_1+a_2+\cdots+a_n 
$$
这意味着, 遍历所有在 $1$ 与 $n$ 之间的整数 $i$, 以其作为下标将对应的数列 $a_i$ **求和**. 事实上, 求和的写法不拘一格, 一般来讲只要我们可以把指标和指标满足的条件写在求和符号下部即可, 而且指标本身也可以作为数参与运算.

???+example "例子"
    $\sum\limits_{d|n}d$ 意味着把所有可以整除 $n$ 的数 (也就是 $n$ 的因数) 求和, $d|n$ 表示 $d$ **整除** $n$.

    $\sum\limits_{q\in\mathbb{Q},q\in[1,3]}=\sqrt{q}$ 意味着把 $[1,3]$ 中所有有理数的平方根求和.

我们定义一种最为常用的求和形式:
$$
\sum_{i=a}^b a_i=\sum_{i\in[a,b]\cap\mathbb{Z}}a_i
$$
这样本小节第一个式子就可以写为 $\sum\limits_{i=1}^na_i$.

我们继续保留这种形式, 但把加法改为乘法, $\sum$ 变成 $\prod$, 就变成了**求积**. 借此机会我们还能引入新的概念, 定义
$$
n! =\prod_{i=1}^ni, 
n!! = \begin{cases}
        \prod_{i=2}^{n/2}2i & n\bmod 2=0, \\ 
        \prod_{i=2}^{(n+1)/2}2i-1 & n\bmod 2=1.
      \end{cases}
$$
其中 $n!$ 为 $n$ 的**阶乘**, $n!!$ 为 $n$ 的**双阶乘**, $\bmod$ 运算符 (读作 "**模**运算符") 则是我们熟悉的带余除法, 如 $5\bmod 2=1$. 不难发现双阶乘实际就是相邻的一串奇数或偶数相乘.

不止求和与求积, 事实上, 还有很多运算符也可以作为巨运算符, 它们都表示了对一个集合中的每一个元素施加操作.

???+example "例子"
    我们记 $\gcd(a,b)$ 表示 $a,b$ 的**最大公约数**, 则 $\gcd\limits_{i=1}^n a_i$ 表示数列 $\{a_n\}$ 的最大公约数; 我们记 $\max\{a,b\}$ 表示 $a,b$ 的较大者, 则 $\max\limits_{i=1}^n\{a_i\}$ 表示数列 $\{a_n\}$ 的最大值; $\bigcup\limits_{i=1}^nA_i$ 表示集合序列 $\{A_n\}$ 的并集.

求和与求积符号还可以嵌套和调换顺序. 考虑如下几个定理:

???+info "定理"
    $$
        \left(\sum_{i=1}^na_i\right)\left(\sum_{j=1}^nb_j\right) = \sum_{i=1}^n\sum_{j=1}^n a_ib_j
    $$

???+info "Fubini 定理弱化版"
    假设 $\{a_{nn}\}$ 是一个 $n$ 行 $n$ 列的数表, 第 $i$ 行 $j$ 列的数记为 $a_{ij}$, 则有
    
    $$
        \sum_{i=1}^n\sum_{j=1}^ia_{ij}=\sum_{j=1}^n\sum_{i=j}^na_{ij}.
    $$

请自己完成证明. $\square$

???+example "最小二乘估计"
    这是统计学的一个例子, 对于给定的一组散点数据列 $\{(x_n,y_n)\}$, 记其平均数为 $\bar x,\bar y$, 则该数据的回归直线方程参数
    
    $$
        \hat b=\dfrac{\sum\limits_{i=1}^n(x_i-\bar x)(y_i-\bar y)}{\sum\limits_{i=1}^n(x_i-\bar x)^2}=\dfrac{\sum\limits_{i=1}^nx_iy_i-n\bar x\bar y}{\sum\limits_{i=1}^nx_i^2-n\bar x^2}.
    $$
    
    请将左式展开后与右式比较检查是否成立.

### 前 n 项和的通项

对于数列 $\{a_n\}$, 设 $S_n=\sum\limits_{i=1}^na_i$. 先来计算等差等比数列的 $S_n$, 我们直接写成定理.

???+info "定理"
    对于等差数列, $S_n=\dfrac{n(a_1+a_n)}{2}=na_1+\dfrac{n(n-1)}{2}d$.

    对于等比数列,
    
    $$
        a_n = \begin{cases}
            a_1 & q=1 \\ 
            \dfrac{a_1(1-q^n)}{1-q} & q\neq 1
           \end{cases}.
    $$

**证** 这里只证等比数列 $q\neq 1$ 的情况, 注意到 $qS_n=\sum\limits_{i=1}^nqa_i=\sum\limits_{i=2}^{n+1}a_{i+1}$, 与 $S_n=\sum\limits_{i=1}^na_i$ 相减即得 $(1-q)S_n=a_1(1-q^n)$. $\square$

接下来我们考虑一种较为特殊的情形. 假设 $\{a_n\}$ 为等差数列, $\{b_n\}$ 为等比数列 ($q\neq 1$), 则 $c_n=a_nb_n$ 的前 $n$ 项和 $S_n$ 的通项如何求呢? 我们引入一个重要的引理.

???+info "引理 (Abel 求和法, 分部求和法)"
    若 $B_n=\sum\limits_{i=1}^nb_i$, 则
    
    $$
    S_n=a_nB_n-\sum_{i=1}^{n-1}(a_{i+1}-a_i)B_i
    $$

**证** 我们有
$$
S_n=\sum_{i=1}^na_i(B_i-B_{i-1})=a_nB_n+\sum_{i=1}^{n-1}B_i(a_{i}-a_{i+1}). \square 
$$
则我们直接应用引理有 
$$
\begin{aligned}
    S_n &=a_n\frac{b_1(1-q^n)}{1-q}-\frac{db_1}{1-q}\sum_{i=1}^{n-1}(1-q^i) \\ 
    &=\frac{b_1}{1-q}\left(a_n(1-q^n)-(n-1)d+\frac{d(q-q^n)}{1-q}\right) \\ 
    &= \frac{b_1}{1-q}\left(a_1+\frac{qd}{1-q}-\left(a_n+\frac{d}{1-q}\right)q^n\right).
\end{aligned}
$$

???+question "练习"
    已知 $\{a_n\}$ 为等差数列且 $d\neq0$, $\{b_n\}$ 为等比数列且 $q\neq1$, 已知 $\{a_n+b_n\}$ 的前四项分别是 $0,5,11,19$, 求 $S_n=\sum_{i=1}^na_ib_i$.

        ??? note "请先思考再看答案"
            将数列的前四项列出方程组 (只使用 $a_1,b_1,d,q$), 化简方程组得到一元三次方程 $(q-1)^2(q-2)=0$, 解得 $q=2$, 则 $a_1=-1,d=4,b_1=1,q=2$, 代入上文计算公式得 $S_n=(4n-9)2^n+9$.

